<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title>🧠 Panel de Administración - Psicología Profesional</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon-32x32.png" />

  <!-- Fuentes profesionales -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- Estilos personalizados para el CMS -->
  <style>
    :root {
      --primary-color: #0ca4b8;
      --primary-light: #d0f1f6;
      --secondary-color: #5a9cf2;
      --accent-mint: #d4f5e9;
      --accent-lavender: #e4e1f5;
      --text-dark: #0d5561;
      --text-light: #6b7280;
      --border-light: #e5e7eb;
      --success-color: #10b981;
      --warning-color: #f59e0b;
      --error-color: #ef4444;
    }

    /* Personalización del CMS */
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, var(--primary-light) 0%, var(--accent-mint) 100%);
      min-height: 100vh;
    }

    /* Header personalizado */
    .nc-app-header {
      background: white !important;
      border-bottom: 1px solid var(--border-light) !important;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
    }

    /* Sidebar personalizada */
    .nc-app-sidebar {
      background: white !important;
      border-right: 1px solid var(--border-light) !important;
    }

    /* Botones principales */
    .nc-button-primary {
      background: var(--primary-color) !important;
      border-color: var(--primary-color) !important;
      border-radius: 8px !important;
      font-weight: 500 !important;
      transition: all 0.2s ease !important;
    }

    .nc-button-primary:hover {
      background: #0a8599 !important;
      transform: translateY(-1px) !important;
      box-shadow: 0 4px 12px rgba(12, 164, 184, 0.3) !important;
    }

    /* Cards y contenedores */
    .nc-card {
      border-radius: 12px !important;
      border: 1px solid var(--border-light) !important;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
      transition: all 0.2s ease !important;
    }

    .nc-card:hover {
      box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.15) !important;
      transform: translateY(-2px) !important;
    }

    /* Inputs y formularios */
    .nc-input {
      border-radius: 8px !important;
      border: 1px solid var(--border-light) !important;
      transition: all 0.2s ease !important;
    }

    .nc-input:focus {
      border-color: var(--primary-color) !important;
      box-shadow: 0 0 0 3px rgba(12, 164, 184, 0.1) !important;
    }

    /* Estados de éxito, advertencia y error */
    .nc-toast-success {
      background: var(--success-color) !important;
      border-radius: 8px !important;
    }

    .nc-toast-warning {
      background: var(--warning-color) !important;
      border-radius: 8px !important;
    }

    .nc-toast-error {
      background: var(--error-color) !important;
      border-radius: 8px !important;
    }

    /* Loading states */
    .nc-loader {
      border-color: var(--primary-light) !important;
      border-top-color: var(--primary-color) !important;
    }

    /* Personalización del editor markdown */
    .nc-markdown-editor {
      border-radius: 8px !important;
      border: 1px solid var(--border-light) !important;
    }

    /* Mensajes de ayuda */
    .nc-field-hint {
      color: var(--text-light) !important;
      font-size: 0.875rem !important;
      margin-top: 4px !important;
    }

    /* Iconos y elementos visuales */
    .nc-icon {
      color: var(--primary-color) !important;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .nc-app-sidebar {
        transform: translateX(-100%) !important;
      }

      .nc-app-sidebar.open {
        transform: translateX(0) !important;
      }
    }

    /* Animaciones suaves */
    * {
      transition: all 0.2s ease !important;
    }

    /* Personalización del dashboard */
    .nc-dashboard-card {
      background: white !important;
      border-radius: 12px !important;
      padding: 24px !important;
      margin-bottom: 16px !important;
      border: 1px solid var(--border-light) !important;
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1) !important;
    }

    /* Mejoras de accesibilidad */
    .nc-button:focus,
    .nc-input:focus,
    .nc-select:focus {
      outline: 2px solid var(--primary-color) !important;
      outline-offset: 2px !important;
    }
  </style>

</head>
<body>
  <!-- Include the script that builds the page and powers Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  <script>
    // Configuración para GitHub
    CMS.init({
      config: {
        backend: {
          name: 'github',
          repo: 'Parokor/web-psicologo',
          branch: 'main'
        }
      }
    });
  </script>
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    font-family: 'Inter', sans-serif;
  ">
    <div style="
      width: 60px;
      height: 60px;
      border: 4px solid #e5e7eb;
      border-top: 4px solid #0ca4b8;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 20px;
    "></div>
    <h2 style="
      color: #0d5561;
      font-size: 24px;
      font-weight: 600;
      margin: 0 0 8px 0;
    ">🧠 Cargando tu panel profesional</h2>
    <p style="
      color: #6b7280;
      font-size: 16px;
      margin: 0;
    ">Preparando tu espacio de trabajo...</p>
  </div>

  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <!-- Decap CMS from CDN (no npm dependency conflicts) -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

  <!-- Configuración personalizada del CMS -->
  <script>
    // Ocultar loading screen cuando el CMS esté listo
    window.addEventListener('load', function() {
      setTimeout(function() {
        const loadingScreen = document.getElementById('loading-screen');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          loadingScreen.style.transition = 'opacity 0.5s ease';
          setTimeout(function() {
            loadingScreen.style.display = 'none';
          }, 500);
        }
      }, 1000);
    });

    // Configuración de Netlify Identity
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }

    // Personalización del CMS
    CMS.registerPreviewStyle("/admin/preview.css");

    // Widget personalizado para testimonios
    CMS.registerWidget("testimonial", {
      controlComponent: CMS.getWidget("object").controlComponent,
      previewComponent: function(props) {
        const { value } = props;
        return h('div', {
          style: {
            background: '#f8fafc',
            padding: '16px',
            borderRadius: '8px',
            border: '1px solid #e2e8f0'
          }
        }, [
          h('h4', { style: { margin: '0 0 8px 0', color: '#1e293b' } }, value?.name || 'Nombre del testimonio'),
          h('p', { style: { margin: '0', color: '#64748b', fontSize: '14px' } }, value?.testimonial || 'Contenido del testimonio...')
        ]);
      }
    });

    // Mensajes de bienvenida personalizados
    CMS.registerEventListener({
      name: 'login',
      handler: ({ author }) => {
        console.log(`¡Bienvenido/a ${author.name}! 🎉`);
        // Aquí podrías agregar notificaciones personalizadas
      }
    });
  </script>
</body>
</html>